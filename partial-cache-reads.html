<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#FC5200"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2026-02-19T18:20:17.903328287"><title>Partial cache reads | Apollo Kotlin Normalized Cache</title><script type="application/json" id="virtual-toc-data">[{"id":"server-errors-stored-in-the-cache","level":0,"title":"Server errors stored in the cache","anchor":"#server-errors-stored-in-the-cache"},{"id":"strategies","level":0,"title":"Strategies","anchor":"#strategies"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><link href="static/custom.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="32x32" href="images/favicon-192x192.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Partial cache reads | Apollo Kotlin Normalized Cache"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Apollo Kotlin Normalized Cache Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/partial-cache-reads.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Partial cache reads | Apollo Kotlin Normalized Cache"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/partial-cache-reads.html#webpage",
    "url": "writerside-documentation/partial-cache-reads.html",
    "name": "Partial cache reads | Apollo Kotlin Normalized Cache",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Apollo Kotlin Normalized Cache Help"
}</script><!-- End Schema.org --></head><body data-id="partial-cache-reads" data-main-title="Partial cache reads" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Apollo Kotlin Normalized Cache  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="partial-cache-reads" id="partial-cache-reads.md">Partial cache reads</h1><p id="-uet9ba_3">The cache supports <span class="control" id="-uet9ba_12">partial cache reads</span>, in a similar way to how GraphQL supports partial responses.</p><p id="-uet9ba_4">This means that if some fields are missing from the cache or represent an error from the server, the cache can return the <span class="control" id="-uet9ba_13">available data</span> along with the errors.</p><p id="-uet9ba_5">This is <span class="control" id="-uet9ba_14">opt-in</span>: by default, executing operations or calling <a href="https://apollographql.github.io/apollo-kotlin-normalized-cache/kdoc/normalized-cache/com.apollographql.cache.normalized/-apollo-store/read-operation.html" id="-uet9ba_15" data-external="true" rel="noopener noreferrer"><code class="code" id="-uet9ba_18">ApolloStore.readOperation()</code></a> returns responses that expose cache misses and cached server errors with a <span class="control" id="-uet9ba_16">non-null <code class="code" id="-uet9ba_19">exception</code></span> and a <span class="control" id="-uet9ba_17">null <code class="code" id="-uet9ba_20">data</code></span>.</p><p id="-uet9ba_6">To enable partial cache reads:</p><ul class="list _bullet" id="-uet9ba_7"><li class="list__item" id="-uet9ba_21"><p>For cache misses, <a href="options.html" id="-uet9ba_23" data-tooltip="When you execute a query, options control how the query is executed. ApolloClient returns an ApolloResponse that satisfies the options or an exceptional response otherwise (response.exception is not null).">set</a> <a href="https://apollographql.github.io/apollo-kotlin-normalized-cache/kdoc/normalized-cache/com.apollographql.cache.normalized.options/throw-on-cache-miss.html" id="-uet9ba_24" data-external="true" rel="noopener noreferrer"><code class="code" id="-uet9ba_25">cacheMissesAsException(false)</code></a>.</p></li><li class="list__item" id="-uet9ba_22"><p>For cached server errors, <a href="options.html" id="-uet9ba_26" data-tooltip="When you execute a query, options control how the query is executed. ApolloClient returns an ApolloResponse that satisfies the options or an exceptional response otherwise (response.exception is not null).">set</a> <a href="https://apollographql.github.io/apollo-kotlin-normalized-cache/kdoc/normalized-cache/com.apollographql.cache.normalized.options/throw-on-cache-miss.html" id="-uet9ba_27" data-external="true" rel="noopener noreferrer"><code class="code" id="-uet9ba_28">serverErrorsAsException(false)</code></a>.</p></li></ul><p id="-uet9ba_8">Doing this, the returned responses can contain <span class="control" id="-uet9ba_29">partial <code class="code" id="-uet9ba_31">data</code></span> and <span class="control" id="-uet9ba_30">non-empty <code class="code" id="-uet9ba_32">errors</code></span> for any missing (or stale) fields in the cache and cached server errors.</p><aside class="prompt" data-type="tip" data-title="" id="-uet9ba_9"><p id="-uet9ba_33"><code class="code" id="-uet9ba_34">ApolloResponse.cacheInfo.isCacheHit</code> will be false when any field is missing. <code class="code" id="-uet9ba_35">ApolloResponse.cacheInfo.isStale</code> will be true when any field is stale.</p></aside><section class="chapter"><h2 id="server-errors-stored-in-the-cache" data-toc="server-errors-stored-in-the-cache">Server errors stored in the cache</h2><p id="-uet9ba_36">Errors from the server are stored in the cache, and can be returned when reading it, as seen above.</p><p id="-uet9ba_37">By default, errors don't replace existing data in the cache. You can change this behavior with <a href="https://apollographql.github.io/apollo-kotlin-normalized-cache/kdoc/normalized-cache/com.apollographql.cache.normalized/errors-replace-cached-values.html?query=fun%20%3CT%3E%20MutableExecutionOptions%3CT%3E.errorsReplaceCachedValues(errorsReplaceCachedValues:%20Boolean):%20T" id="-uet9ba_38" data-external="true" rel="noopener noreferrer"><code class="code" id="-uet9ba_39">errorsReplaceCachedValues(true)</code></a>.</p></section><section class="chapter"><h2 id="strategies" data-toc="strategies">Strategies</h2><p id="-uet9ba_40">Using the above options and (optionally) a custom fetch policy, you can implement different strategies for your application.</p><p id="-uet9ba_41"><span class="emphasis" id="-uet9ba_49"><span class="control" id="-uet9ba_50">ðŸ‘‰ Go to cache first, don't emit partial data, and go to the network if there are cache misses or cached server errors</span></span></p><p id="-uet9ba_42">That is the default behavior.</p><p id="-uet9ba_43"><span class="emphasis" id="-uet9ba_51"><span class="control" id="-uet9ba_52">ðŸ‘‰ Go to cache first, emit partial data with cached server errors / don't emit partial data when there are cache misses, and go to the network if there are cache misses</span></span></p><p id="-uet9ba_44">Use <code class="code" id="-uet9ba_53">serverErrorsAsException(false)</code>.</p><p id="-uet9ba_45"><span class="emphasis" id="-uet9ba_54"><span class="control" id="-uet9ba_55">ðŸ‘‰ Go to cache first, emit partial data with cache miss errors and cached server errors, and go to the network if there are any errors</span></span></p><p id="-uet9ba_46">Use <code class="code" id="-uet9ba_56">serverErrorsAsException(false)</code>, <code class="code" id="-uet9ba_57">cacheMissesAsException(false)</code>, and a custom fetch policy interceptor like so:</p><div class="code-block" data-lang="kotlin">
val apolloClient = ApolloClient.Builder()
    /*...*/
    .serverErrorsAsException(false)
    .cacheMissesAsException(false)
    .fetchPolicyInterceptor(MyCacheInterceptor)
    .build()
</div><div class="code-block" data-lang="kotlin">
object MyCacheInterceptor : ApolloInterceptor {
  override fun &lt;D : Operation.Data&gt; intercept(request: ApolloRequest&lt;D&gt;, chain: ApolloInterceptorChain): Flow&lt;ApolloResponse&lt;D&gt;&gt; {
    return flow {
      val cacheResponse = chain.proceed(
          request = request
              .newBuilder()
              // Controls where to read the data from (cache or network)
              .fetchFromCache(true)
              .build(),
      ).single()
      val fetchFromNetwork = cacheResponse.exception != null || cacheResponse.errors != null &amp;&amp; cacheResponse.errors!!.isNotEmpty()
      emit(cacheResponse.newBuilder().isLast(!fetchFromNetwork).build())
      if (fetchFromNetwork) {
        emitAll(chain.proceed(request = request))
      }
    }
  }
}
</div></section><div class="last-modified">Last modified: 05 February 2026</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="trimming.html" class="navigation-links__prev">Trimming the cache</a><a href="compiler-plugin.html" class="navigation-links__next">Compiler plugin</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>